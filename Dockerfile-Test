FROM openjdk:17.0.2-jdk-slim as build
WORKDIR application
ENV MMS5_ROOT_CONTEXT ${MMS5_ROOT_CONTEXT}
ENV MMS5_LOAD_SERVICE_URL ${MMS5_LOAD_SERVICE_URL}
ENV MMS5_QUAD_STORE_URL ${MMS5_QUAD_STORE_URL}
ENV MMS5_QUAD_STORE_URL ${MMS5_QUAD_STORE_URL}
ENV MMS5_QUERY_URL ${MMS5_QUERY_URL}
ENV MMS5_UPDATE_URL ${MMS5_UPDATE_URL}
ENV MMS5_GRAPH_STORE_PROTOCOL_URL ${MMS5_GRAPH_STORE_PROTOCOL_URL}
COPY . .
RUN apt-get update && apt-get install -y procps dnsutils
RUN echo $MMS5_ROOT_CONTEXT
RUN ./gradlew test --debug